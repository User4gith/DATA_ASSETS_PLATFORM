<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统管理 - 数智之眼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --primary: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
        }
        
        .sidebar-expanded { width: 240px; }
        .sidebar-collapsed { width: 60px; }
        .sidebar-text { transition: opacity 0.3s ease; }
        .sidebar-collapsed .sidebar-text { opacity: 0; }
        .card-shadow { box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); }
        .content-panel { display: none; }
        .content-panel.active { display: block; }
        .bg-primary { background-color: var(--primary); }
        .text-primary { color: var(--primary); }
        .border-primary { border-color: var(--primary); }
        .bg-success { background-color: var(--success); }
        .text-success { color: var(--success); }
        .bg-warning { background-color: var(--warning); }
        .text-warning { color: var(--warning); }
        .bg-error { background-color: var(--error); }
        .text-error { color: var(--error); }
        
        .dept-tree {
            max-height: 400px;
            overflow-y: auto;
        }
        .dept-item {
            cursor: pointer;
            transition: all 0.2s;
        }
        .dept-item:hover {
            background-color: #f3f4f6;
        }
        .dept-item.selected {
            background-color: #dbeafe;
            color: #1d4ed8;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 顶部导航栏 -->
    <!-- 顶部导航栏 -->
    <header class="bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50 h-16">
        <div class="flex items-center justify-between h-full px-6">
            
            <!-- Logo区域 -->
            <div class="flex items-center space-x-4">
                <button id="sidebarToggle" class="text-gray-500 hover:text-gray-700 focus:outline-none">
                    <i class="fas fa-bars text-lg"></i>
                </button>
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
                        <i class="fas fa-eye text-white text-sm"></i>
                    </div>
                    <span class="text-xl font-semibold text-gray-800">数智之眼</span>
                </div>
            </div>

            <!-- 中间：全局搜框 -->
            <div class="flex-1 max-w-xl mx-4 hidden md:block">
                <div class="relative">
                    <input 
                        type="text" 
                        placeholder="搜索数据资产、表名、字段..." 
                        class="w-full px-4 py-2 pl-10 pr-4 text-sm border border-border-primary rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white"
                    >
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>

            <!-- 右侧：快捷功能和用户信息 -->
            <div class="flex items-center space-x-2 md:space-x-4">
                <!-- 移动端搜索按钮 -->
                <button class="md:hidden p-2 text-gray-600 hover:text-primary">
                    <i class="fas fa-search text-lg"></i>
                </button>
                
                <!-- 帮助文档 -->
                <!-- <button class="p-2 text-gray-600 hover:text-primary transition-colors">
                    <i class="fas fa-question-circle text-lg"></i>
                </button> -->
                
                <!-- 消息通知 -->
                <button class="p-2 text-gray-600 hover:text-primary transition-colors relative">
                    <i class="fas fa-bell text-lg"></i>
                    <span class="absolute -top-1 -right-1 bg-error text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
                </button>

                <!-- 用户信息 -->
                <!-- <div class="flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-2 md:px-3 py-2 rounded-lg transition-colors">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-medium">张</span>
                    </div>
                    <span class="text-gray-800 font-medium hidden sm:block">张三</span>
                    <i class="fas fa-chevron-down text-gray-400 text-sm hidden sm:block"></i>
                </div> -->

                <div class="flex items-center space-x-2 cursor-pointer hover:bg-gray-50 px-2 md:px-3 py-2 rounded-lg transition-colors" onclick="goToProfile()">
                    <div class="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                        <span class="text-white text-sm font-medium">张</span>
                    </div>
                    <span class="text-gray-800 font-medium hidden sm:block">张三</span>
                    <!-- <i class="fas fa-chevron-down text-gray-400 text-sm hidden sm:block"></i> -->
                </div>


            </div>
        </div>
    </header>

    <!-- 侧边栏 -->
    <aside id="sidebar" class="fixed left-0 top-16 h-full bg-white shadow-lg transition-all duration-300 sidebar-expanded z-20">
        <nav class="mt-4">
            <!-- 主要功能 -->
            <div class="px-4 py-2">
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider sidebar-text">主要功能</div>
            </div>
            
            <a href="index.html" class="flex items-center space-x-3 px-3 py-2 mx-3 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                <i class="fas fa-home w-5"></i>
                <span class="sidebar-text">首页概览</span>
            </a>
            
            <a href="data_map.html" class="flex items-center space-x-3 px-3 py-2 mx-3 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                <i class="fas fa-database w-5"></i>
                <span class="sidebar-text">数据资产中心</span>
            </a>

            <!-- 数据合作 -->
            <div class="px-4 py-2 mt-4">
                <div class="text-xs font-semibold text-gray-400 uppercase tracking-wider sidebar-text">数据合作</div>
            </div>
            
            <a href="data_map_coop.html" class="flex items-center space-x-3 px-3 py-2 mx-3 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                <i class="fas fa-share-alt w-5"></i>
                <span class="sidebar-text">开放数据资产</span>
            </a>
            
            <a href="data_comp_mg4.html" class="flex items-center space-x-3 px-3 py-2 mx-3 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors">
                <i class="fas fa-handshake w-5"></i>
                <span class="sidebar-text">合作企业管理</span>
            </a>

            <!-- 系统管理 -->
            <a href="system_management.html" class="flex items-center space-x-3 px-3 py-2 mx-3 text-white bg-primary rounded-lg transition-colors">
                <i class="fas fa-cog w-5"></i>
                <span class="sidebar-text">系统管理</span>
            </a>
        </nav>
    </aside>

    <!-- 主内容区 -->
    <main id="mainContent" class="flex-1 ml-60 transition-all duration-300">
        <div class="p-6 pt-20">
            <!-- 面包屑导航 -->
            <nav class="flex items-center text-sm text-gray-500 mb-6">
                <a href="index.html" class="hover:text-primary">
                    <i class="fas fa-home mr-2"></i>首页
                </a>
                <span class="mx-2">/</span>
                <span class="text-gray-900">系统管理</span>
            </nav>

            <!-- 页面标题 -->
            <div class="mb-6">
                <h1 class="text-2xl font-bold text-gray-900 mb-2">系统管理</h1>
                <p class="text-gray-600">管理系统用户、部门组织、角色权限和基础配置</p>
            </div>

            <!-- 内容面板切换 -->
            <div class="bg-white rounded-xl card-shadow">
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6">
                        <button class="py-4 px-1 border-b-2 border-primary font-medium text-sm text-primary" 
                                onclick="switchPanel('users')" data-panel="users">
                            用户管理
                        </button>
                        <button class="py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" 
                                onclick="switchPanel('departments')" data-panel="departments">
                            部门管理
                        </button>
                        <button class="py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" 
                                onclick="switchPanel('roles')" data-panel="roles">
                            角色权限
                        </button>
                        <button class="py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" 
                                onclick="switchPanel('config')" data-panel="config">
                            系统配置
                        </button>
                        <button class="py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700 hover:border-gray-300" 
                                onclick="switchPanel('logs')" data-panel="logs">
                            操作日志
                        </button>
                    </nav>
                </div>

                <!-- 用户管理面板 -->
                <div id="users-panel" class="content-panel active">
                    <div class="p-6">
                        <!-- 统计卡片 -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div class="bg-blue-50 rounded-lg p-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-users text-blue-600"></i>
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-2xl font-bold text-blue-600">156</div>
                                        <div class="text-sm text-gray-600">总用户数</div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-green-50 rounded-lg p-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user-check text-green-600"></i>
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-2xl font-bold text-green-600">142</div>
                                        <div class="text-sm text-gray-600">活跃用户</div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-yellow-50 rounded-lg p-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user-clock text-yellow-600"></i>
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-2xl font-bold text-yellow-600">8</div>
                                        <div class="text-sm text-gray-600">待激活</div>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-red-50 rounded-lg p-4">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user-slash text-red-600"></i>
                                    </div>
                                    <div class="ml-3">
                                        <div class="text-2xl font-bold text-red-600">6</div>
                                        <div class="text-sm text-gray-600">已禁用</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 操作栏 -->
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex space-x-4">
                                <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors" onclick="showAddUserModal()">
                                    <i class="fas fa-plus mr-2"></i>添加用户
                                </button>
                                <button class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-upload mr-2"></i>批量导入
                                </button>
                                <button class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-download mr-2"></i>导出用户
                                </button>
                            </div>
                            <div class="flex space-x-2">
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                    <option>全部部门</option>
                                    <option>技术部</option>
                                    <option>产品部</option>
                                    <option>运营部</option>
                                </select>
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                    <option>全部角色</option>
                                    <option>管理员</option>
                                    <option>数据分析师</option>
                                    <option>普通用户</option>
                                </select>
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                    <option>全部状态</option>
                                    <option>正常</option>
                                    <option>待激活</option>
                                    <option>已禁用</option>
                                </select>
                            </div>
                        </div>

                        <!-- 用户列表 -->
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            <input type="checkbox" class="rounded">
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">用户信息</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">部门</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">角色</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">最后登录</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <input type="checkbox" class="rounded">
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">张三</div>
                                                    <div class="text-sm text-gray-500">zhangsan@company.com</div>
                                                    <div class="text-xs text-gray-400">工号: EMP001</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900">技术部</div>
                                            <div class="text-xs text-gray-500">后端开发组</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">系统管理员</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">正常</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-06-23 16:30</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button class="text-primary hover:text-blue-600 mr-3" onclick="editUser(1)">编辑</button>
                                            <button class="text-warning hover:text-yellow-600 mr-3">重置密码</button>
                                            <button class="text-error hover:text-red-600">禁用</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <input type="checkbox" class="rounded">
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">李四</div>
                                                    <div class="text-sm text-gray-500">lisi@company.com</div>
                                                    <div class="text-xs text-gray-400">工号: EMP002</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900">产品部</div>
                                            <div class="text-xs text-gray-500">产品设计组</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">数据分析师</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">正常</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2025-06-23 14:20</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button class="text-primary hover:text-blue-600 mr-3" onclick="editUser(2)">编辑</button>
                                            <button class="text-warning hover:text-yellow-600 mr-3">重置密码</button>
                                            <button class="text-error hover:text-red-600">禁用</button>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <input type="checkbox" class="rounded">
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600"></i>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900">王五</div>
                                                    <div class="text-sm text-gray-500">wangwu@company.com</div>
                                                    <div class="text-xs text-gray-400">工号: EMP003</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900">运营部</div>
                                            <div class="text-xs text-gray-500">市场推广组</div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">普通用户</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">待激活</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">从未登录</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                            <button class="text-primary hover:text-blue-600 mr-3" onclick="editUser(3)">编辑</button>
                                            <button class="text-success hover:text-green-600 mr-3">激活</button>
                                            <button class="text-error hover:text-red-600">删除</button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- 分页 -->
                        <div class="flex items-center justify-between mt-6">
                            <div class="text-sm text-gray-500">
                                显示 1-10 条，共 156 条记录
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">上一页</button>
                                <button class="px-3 py-1 bg-primary text-white rounded text-sm">1</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">2</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">3</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 部门管理面板 -->
                <div id="departments-panel" class="content-panel">
                    <div class="p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <!-- 左侧：部门树 -->
                            <div class="lg:col-span-1">
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <div class="flex justify-between items-center mb-4">
                                        <h3 class="text-lg font-medium text-gray-900">组织架构</h3>
                                        <button class="text-primary hover:text-blue-600" onclick="showAddDeptModal()">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <div class="dept-tree">
                                        <div class="dept-item p-2 rounded-lg selected" data-dept-id="1">
                                            <div class="flex items-center">
                                                <i class="fas fa-building text-blue-600 mr-2"></i>
                                                <span class="font-medium">总公司</span>
                                                <span class="ml-auto text-xs text-gray-500">(156人)</span>
                                            </div>
                                        </div>
                                        <div class="ml-4">
                                            <div class="dept-item p-2 rounded-lg" data-dept-id="2">
                                                <div class="flex items-center">
                                                    <i class="fas fa-code text-green-600 mr-2"></i>
                                                    <span>技术部</span>
                                                    <span class="ml-auto text-xs text-gray-500">(45人)</span>
                                                </div>
                                            </div>
                                            <div class="ml-4">
                                                <div class="dept-item p-2 rounded-lg" data-dept-id="3">
                                                    <div class="flex items-center">
                                                        <i class="fas fa-server text-gray-600 mr-2"></i>
                                                        <span>后端开发组</span>
                                                        <span class="ml-auto text-xs text-gray-500">(20人)</span>
                                                    </div>
                                                </div>
                                                <div class="dept-item p-2 rounded-lg" data-dept-id="4">
                                                    <div class="flex items-center">
                                                        <i class="fas fa-desktop text-gray-600 mr-2"></i>
                                                        <span>前端开发组</span>
                                                        <span class="ml-auto text-xs text-gray-500">(15人)</span>
                                                    </div>
                                                </div>
                                                <div class="dept-item p-2 rounded-lg" data-dept-id="5">
                                                    <div class="flex items-center">
                                                        <i class="fas fa-mobile-alt text-gray-600 mr-2"></i>
                                                        <span>移动开发组</span>
                                                        <span class="ml-auto text-xs text-gray-500">(10人)</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dept-item p-2 rounded-lg" data-dept-id="6">
                                                <div class="flex items-center">
                                                    <i class="fas fa-lightbulb text-orange-600 mr-2"></i>
                                                    <span>产品部</span>
                                                    <span class="ml-auto text-xs text-gray-500">(28人)</span>
                                                </div>
                                            </div>
                                            <div class="dept-item p-2 rounded-lg" data-dept-id="7">
                                                <div class="flex items-center">
                                                    <i class="fas fa-chart-line text-purple-600 mr-2"></i>
                                                    <span>运营部</span>
                                                    <span class="ml-auto text-xs text-gray-500">(35人)</span>
                                                </div>
                                            </div>
                                            <div class="dept-item p-2 rounded-lg" data-dept-id="8">
                                                <div class="flex items-center">
                                                    <i class="fas fa-users text-teal-600 mr-2"></i>
                                                    <span>人事部</span>
                                                    <span class="ml-auto text-xs text-gray-500">(12人)</span>
                                                </div>
                                            </div>
                                            <div class="dept-item p-2 rounded-lg" data-dept-id="9">
                                                <div class="flex items-center">
                                                    <i class="fas fa-calculator text-indigo-600 mr-2"></i>
                                                    <span>财务部</span>
                                                    <span class="ml-auto text-xs text-gray-500">(8人)</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 右侧：部门详情 -->
                            <div class="lg:col-span-2">
                                <div class="bg-white border border-gray-200 rounded-lg">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex justify-between items-center">
                                            <div>
                                                <h3 class="text-lg font-medium text-gray-900">总公司</h3>
                                                <p class="text-sm text-gray-500">公司总部，负责整体运营管理</p>
                                            </div>
                                            <div class="flex space-x-2">
                                                <button class="text-primary hover:text-blue-600">
                                                    <i class="fas fa-edit mr-1"></i>编辑
                                                </button>
                                                <button class="text-error hover:text-red-600">
                                                    <i class="fas fa-trash mr-1"></i>删除
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- 部门信息 -->
                                    <div class="p-4">
                                        <div class="grid grid-cols-2 gap-4 mb-6">
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">部门编码</label>
                                                <div class="text-sm text-gray-900">DEPT001</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">部门负责人</label>
                                                <div class="text-sm text-gray-900">张三</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">联系电话</label>
                                                <div class="text-sm text-gray-900">010-12345678</div>
                                            </div>
                                            <div>
                                                <label class="block text-sm font-medium text-gray-700 mb-1">成立时间</label>
                                                <div class="text-sm text-gray-900">2020-01-01</div>
                                            </div>
                                        </div>

                                        <!-- 部门人员 -->
                                        <div>
                                            <h4 class="text-md font-medium text-gray-900 mb-3">部门人员</h4>
                                            <div class="space-y-2">
                                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                    <div class="flex items-center">
                                                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                            <i class="fas fa-user text-gray-600 text-xs"></i>
                                                        </div>
                                                        <div class="ml-3">
                                                            <div class="text-sm font-medium text-gray-900">张三</div>
                                                            <div class="text-xs text-gray-500">系统管理员 • EMP001</div>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">部门负责人</span>
                                                </div>
                                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                                    <div class="flex items-center">
                                                        <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                            <i class="fas fa-user text-gray-600 text-xs"></i>
                                                        </div>
                                                        <div class="ml-3">
                                                            <div class="text-sm font-medium text-gray-900">赵六</div>
                                                            <div class="text-xs text-gray-500">副总经理 • EMP004</div>
                                                        </div>
                                                    </div>
                                                    <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">管理员</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 角色权限面板 -->
                <div id="roles-panel" class="content-panel">
                    <div class="p-6">
                        <!-- 角色卡片 -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
                            <!-- 超级管理员角色 -->
                            <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-crown text-red-600"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h3 class="text-lg font-medium text-gray-900">超级管理员</h3>
                                            <p class="text-sm text-gray-500">拥有所有系统权限</p>
                                        </div>
                                    </div>
                                    <button class="text-primary hover:text-blue-600" onclick="editRole('super_admin')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        用户管理
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        部门管理
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        数据资产管理
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        系统配置
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <span class="text-sm text-gray-500">用户数量: 3</span>
                                </div>
                            </div>

                            <!-- 部门管理员角色 -->
                            <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-user-tie text-orange-600"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h3 class="text-lg font-medium text-gray-900">部门管理员</h3>
                                            <p class="text-sm text-gray-500">管理本部门用户和数据</p>
                                        </div>
                                    </div>
                                    <button class="text-primary hover:text-blue-600" onclick="editRole('dept_admin')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        部门用户管理
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        部门数据查看
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        系统配置
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        全局用户管理
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <span class="text-sm text-gray-500">用户数量: 8</span>
                                </div>
                            </div>

                            <!-- 数据分析师角色 -->
                            <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-chart-line text-blue-600"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h3 class="text-lg font-medium text-gray-900">数据分析师</h3>
                                            <p class="text-sm text-gray-500">数据查询和分析权限</p>
                                        </div>
                                    </div>
                                    <button class="text-primary hover:text-blue-600" onclick="editRole('analyst')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        数据查询
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        报表生成
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        数据导出
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        数据修改
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <span class="text-sm text-gray-500">用户数量: 25</span>
                                </div>
                            </div>

                            <!-- 普通用户角色 -->
                            <div class="border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow">
                                <div class="flex items-center justify-between mb-4">
                                    <div class="flex items-center">
                                        <div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
                                            <i class="fas fa-user text-gray-600"></i>
                                        </div>
                                        <div class="ml-3">
                                            <h3 class="text-lg font-medium text-gray-900">普通用户</h3>
                                            <p class="text-sm text-gray-500">基础数据查看权限</p>
                                        </div>
                                    </div>
                                    <button class="text-primary hover:text-blue-600" onclick="editRole('user')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-check text-green-500 mr-2"></i>
                                        数据查看
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        数据下载
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        数据修改
                                    </div>
                                    <div class="flex items-center text-sm text-gray-600">
                                        <i class="fas fa-times text-red-500 mr-2"></i>
                                        用户管理
                                    </div>
                                </div>
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <span class="text-sm text-gray-500">用户数量: 120</span>
                                </div>
                            </div>
                        </div>

                        <!-- 权限矩阵 -->
                        <div class="bg-white border border-gray-200 rounded-lg">
                            <div class="p-4 border-b border-gray-200">
                                <h3 class="text-lg font-medium text-gray-900">权限矩阵</h3>
                                <p class="text-sm text-gray-500">管理各角色的功能权限</p>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">功能模块</th>
                                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">超级管理员</th>
                                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">部门管理员</th>
                                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">数据分析师</th>
                                            <th class="px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">普通用户</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">用户管理</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">部门管理</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">数据查询</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">数据导出</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">系统配置</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-check text-green-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-center">
                                                <i class="fas fa-times text-red-500"></i>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 系统配置面板 -->
                <div id="config-panel" class="content-panel">
                    <div class="p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- 基础配置 -->
                            <div class="bg-white border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">基础配置</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">系统名称</label>
                                        <input type="text" value="数智之眼" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">登录超时时间（分钟）</label>
                                        <input type="number" value="30" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">文件上传大小限制（MB）</label>
                                        <input type="number" value="10" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">系统维护模式</label>
                                        <div class="flex items-center">
                                            <input type="checkbox" class="rounded mr-2">
                                            <span class="text-sm text-gray-600">启用维护模式</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- 安全配置 -->
                            <div class="bg-white border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">安全配置</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">密码最小长度</label>
                                        <input type="number" value="8" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">密码复杂度要求</label>
                                        <div class="space-y-2">
                                            <div class="flex items-center">
                                                <input type="checkbox" checked class="rounded mr-2">
                                                <span class="text-sm text-gray-600">包含大写字母</span>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" checked class="rounded mr-2">
                                                <span class="text-sm text-gray-600">包含小写字母</span>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" checked class="rounded mr-2">
                                                <span class="text-sm text-gray-600">包含数字</span>
                                            </div>
                                            <div class="flex items-center">
                                                <input type="checkbox" class="rounded mr-2">
                                                <span class="text-sm text-gray-600">包含特殊字符</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">登录失败锁定次数</label>
                                        <input type="number" value="5" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                </div>
                            </div>

                            <!-- 邮件配置 -->
                            <div class="bg-white border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">邮件配置</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">SMTP服务器</label>
                                        <input type="text" placeholder="smtp.example.com" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">端口</label>
                                        <input type="number" value="587" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">发送邮箱</label>
                                        <input type="email" placeholder="noreply@company.com" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">邮箱密码</label>
                                        <input type="password" placeholder="••••••••" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                        测试连接
                                    </button>
                                </div>
                            </div>

                            <!-- 数据库配置 -->
                            <div class="bg-white border border-gray-200 rounded-lg p-6">
                                <h3 class="text-lg font-medium text-gray-900 mb-4">数据库配置</h3>
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">数据库类型</label>
                                        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                            <option>MySQL</option>
                                            <option>PostgreSQL</option>
                                            <option>Oracle</option>
                                            <option>SQL Server</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">服务器地址</label>
                                        <input type="text" value="localhost" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">端口</label>
                                        <input type="number" value="3306" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">数据库名</label>
                                        <input type="text" value="data_platform" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                                    </div>
                                    <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                        测试连接
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 保存按钮 -->
                        <div class="mt-6 flex justify-end space-x-4">
                            <button class="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-50">
                                重置
                            </button>
                            <button class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                                保存配置
                            </button>
                        </div>
                    </div>
                </div>

                <!-- 操作日志面板 -->
                <div id="logs-panel" class="content-panel">
                    <div class="p-6">
                        <!-- 日志筛选 -->
                        <div class="flex justify-between items-center mb-6">
                            <div class="flex space-x-4">
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                    <option>全部操作</option>
                                    <option>用户登录</option>
                                    <option>数据查询</option>
                                    <option>配置修改</option>
                                    <option>用户管理</option>
                                </select>
                                <select class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                    <option>全部用户</option>
                                    <option>张三</option>
                                    <option>李四</option>
                                    <option>王五</option>
                                </select>
                                <input type="date" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                <span class="flex items-center text-gray-500">至</span>
                                <input type="date" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            </div>
                            <div class="flex space-x-2">
                                <button class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-search mr-2"></i>查询
                                </button>
                                <button class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                                    <i class="fas fa-download mr-2"></i>导出
                                </button>
                            </div>
                        </div>

                        <!-- 日志列表 -->
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">时间</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">用户</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作类型</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作内容</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">IP地址</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-06-23 18:26:15</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600 text-xs"></i>
                                                </div>
                                                <div class="ml-3">
                                                    <div class="text-sm font-medium text-gray-900">张三</div>
                                                    <div class="text-xs text-gray-500">系统管理员</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">用户管理</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">创建用户：王五</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">192.168.1.100</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">成功</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-06-23 18:20:32</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600 text-xs"></i>
                                                </div>
                                                <div class="ml-3">
                                                    <div class="text-sm font-medium text-gray-900">李四</div>
                                                    <div class="text-xs text-gray-500">数据分析师</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">数据查询</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">查询用户数据表</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">192.168.1.105</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">成功</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-06-23 17:45:18</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600 text-xs"></i>
                                                </div>
                                                <div class="ml-3">
                                                    <div class="text-sm font-medium text-gray-900">张三</div>
                                                    <div class="text-xs text-gray-500">系统管理员</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full">系统配置</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">修改系统超时时间</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">192.168.1.100</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">成功</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-06-23 16:30:45</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600 text-xs"></i>
                                                </div>
                                                <div class="ml-3">
                                                    <div class="text-sm font-medium text-gray-900">张三</div>
                                                    <div class="text-xs text-gray-500">系统管理员</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">用户登录</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">用户登录系统</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">192.168.1.100</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">成功</span>
                                        </td>
                                    </tr>
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">2025-06-23 15:22:10</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                                                    <i class="fas fa-user text-gray-600 text-xs"></i>
                                                </div>
                                                <div class="ml-3">
                                                    <div class="text-sm font-medium text-gray-900">未知用户</div>
                                                    <div class="text-xs text-gray-500">-</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">用户登录</span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">尝试登录系统</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">192.168.1.200</td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">失败</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- 分页 -->
                        <div class="flex items-center justify-between mt-6">
                            <div class="text-sm text-gray-500">
                                显示 1-10 条，共 2,345 条记录
                            </div>
                            <div class="flex space-x-2">
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">上一页</button>
                                <button class="px-3 py-1 bg-primary text-white rounded text-sm">1</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">2</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">3</button>
                                <button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">下一页</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 添加用户模态框 -->
     <!-- 添加用户模态框 -->
     <div id="addUserModal" class="modal">
        <div class="bg-white rounded-lg max-w-md w-full mx-4">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">添加用户</h3>
                    <button onclick="hideAddUserModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">姓名</label>
                        <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">邮箱</label>
                        <input type="email" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">工号</label>
                        <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">部门</label>
                        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                            <option>选择部门</option>
                            <option>技术部</option>
                            <option>产品部</option>
                            <option>运营部</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">角色</label>
                        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                            <option>选择角色</option>
                            <option>系统管理员</option>
                            <option>部门管理员</option>
                            <option>数据分析师</option>
                            <option>普通用户</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                <button onclick="hideAddUserModal()" class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    确定
                </button>
            </div>
        </div>
    </div>

    <!-- 编辑用户模态框 - 完整版本 -->
    <div id="editUserModal" class="modal">
        <div class="bg-white rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto shadow-xl">
            <div class="p-6 border-b border-gray-200 sticky top-0 bg-white z-10">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">编辑用户</h3>
                    <button onclick="hideEditUserModal()" class="text-gray-400 hover:text-gray-600" aria-label="关闭">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <form id="editUserForm" class="space-y-6">
                    <input type="hidden" id="editUserId" value="">
                    
                    <!-- 基本信息 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="editUserName" class="block text-sm font-medium text-gray-700 mb-2">
                                姓名 <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="editUserName" required 
                                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                        
                        <div>
                            <label for="editUserEmployeeId" class="block text-sm font-medium text-gray-700 mb-2">
                                工号 <span class="text-red-500">*</span>
                            </label>
                            <input type="text" id="editUserEmployeeId" required 
                                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div>
                        <label for="editUserEmail" class="block text-sm font-medium text-gray-700 mb-2">
                            邮箱 <span class="text-red-500">*</span>
                        </label>
                        <input type="email" id="editUserEmail" required 
                            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="editUserDepartment" class="block text-sm font-medium text-gray-700 mb-2">
                                部门 <span class="text-red-500">*</span>
                            </label>
                            <select id="editUserDepartment" required 
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">选择部门</option>
                                <option value="技术部">技术部</option>
                                <option value="产品部">产品部</option>
                                <option value="运营部">运营部</option>
                                <option value="人事部">人事部</option>
                                <option value="财务部">财务部</option>
                                <option value="市场部">市场部</option>
                                <option value="销售部">销售部</option>
                            </select>
                        </div>

                        <div>
                            <label for="editUserRole" class="block text-sm font-medium text-gray-700 mb-2">
                                角色 <span class="text-red-500">*</span>
                            </label>
                            <select id="editUserRole" required 
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="">选择角色</option>
                                <option value="超级管理员">超级管理员</option>
                                <option value="系统管理员">系统管理员</option>
                                <option value="部门管理员">部门管理员</option>
                                <option value="数据分析师">数据分析师</option>
                                <option value="普通用户">普通用户</option>
                            </select>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="editUserStatus" class="block text-sm font-medium text-gray-700 mb-2">状态</label>
                            <select id="editUserStatus" 
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                                <option value="正常">正常</option>
                                <option value="待激活">待激活</option>
                                <option value="已禁用">已禁用</option>
                            </select>
                        </div>

                        <div>
                            <label for="editUserPhone" class="block text-sm font-medium text-gray-700 mb-2">手机号</label>
                            <input type="tel" id="editUserPhone" 
                                placeholder="请输入手机号"
                                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        </div>
                    </div>

                    <div>
                        <label for="editUserPosition" class="block text-sm font-medium text-gray-700 mb-2">职位</label>
                        <input type="text" id="editUserPosition" 
                            placeholder="请输入职位"
                            class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                    </div>

                    <div>
                        <label for="editUserRemark" class="block text-sm font-medium text-gray-700 mb-2">备注</label>
                        <textarea id="editUserRemark" rows="4" 
                                placeholder="请输入备注信息..."
                                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none"></textarea>
                    </div>
                </form>
            </div>
            
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-4 sticky bottom-0 bg-white z-10">
                <button onclick="hideEditUserModal()" 
                        class="border border-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-50 transition-colors">
                    取消
                </button>
                <button onclick="saveUserEdit()" 
                        class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    保存修改
                </button>
            </div>
        </div>
    </div>


    <!-- 重置密码模态框 -->
    <div id="resetPasswordModal" class="modal">
        <div class="bg-white rounded-lg max-w-md w-full mx-4">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">重置密码</h3>
                    <button onclick="hideResetPasswordModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="mb-4">
                    <div class="flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <i class="fas fa-exclamation-triangle text-yellow-600 mr-3"></i>
                        <div>
                            <p class="text-sm text-yellow-800">确定要重置用户 <span id="resetUserName" class="font-medium"></span> 的密码吗？</p>
                            <p class="text-xs text-yellow-600 mt-1">重置后密码将变为默认密码，用户需要重新设置。</p>
                        </div>
                    </div>
                </div>
                <form class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">新密码</label>
                        <input type="password" id="newPassword" placeholder="留空则使用默认密码" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">确认密码</label>
                        <input type="password" id="confirmPassword" placeholder="留空则使用默认密码" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary">
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="sendEmailNotification" class="rounded mr-2">
                        <span class="text-sm text-gray-600">发送邮件通知用户</span>
                    </div>
                </form>
            </div>
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                <button onclick="hideResetPasswordModal()" class="border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button onclick="confirmResetPassword()" class="bg-warning text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-colors">
                    确认重置
                </button>
            </div>
        </div>
    </div>

    <script>
        // 侧边栏切换
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (sidebar.classList.contains('sidebar-expanded')) {
                sidebar.classList.remove('sidebar-expanded');
                sidebar.classList.add('sidebar-collapsed');
                mainContent.classList.remove('ml-60');
                mainContent.classList.add('ml-16');
            } else {
                sidebar.classList.remove('sidebar-collapsed');
                sidebar.classList.add('sidebar-expanded');
                mainContent.classList.remove('ml-16');
                mainContent.classList.add('ml-60');
            }
        }

        // 面板切换
        function switchPanel(panelName) {
            // 隐藏所有面板
            const panels = document.querySelectorAll('.content-panel');
            panels.forEach(panel => panel.classList.remove('active'));
            
            // 显示目标面板
            document.getElementById(panelName + '-panel').classList.add('active');
            
            // 更新导航状态
            const navButtons = document.querySelectorAll('[data-panel]');
            navButtons.forEach(button => {
                if (button.dataset.panel === panelName) {
                    button.classList.add('border-primary', 'text-primary');
                    button.classList.remove('border-transparent', 'text-gray-500');
                } else {
                    button.classList.remove('border-primary', 'text-primary');
                    button.classList.add('border-transparent', 'text-gray-500');
                }
            });
        }

        // 部门树点击事件
        document.addEventListener('DOMContentLoaded', function() {
            const deptItems = document.querySelectorAll('.dept-item');
            deptItems.forEach(item => {
                item.addEventListener('click', function() {
                    // 移除其他选中状态
                    deptItems.forEach(i => i.classList.remove('selected'));
                    // 添加当前选中状态
                    this.classList.add('selected');
                });
            });
        });

        // 添加用户模态框
        function showAddUserModal() {
            document.getElementById('addUserModal').classList.add('show');
        }

        function hideAddUserModal() {
            document.getElementById('addUserModal').classList.remove('show');
        }

        // 编辑用户
        function editUser(userId) {
            alert('编辑用户 ID: ' + userId);
        }

        // 编辑角色
        function editRole(roleId) {
            alert('编辑角色: ' + roleId);
        }

        // 添加部门模态框
        function showAddDeptModal() {
            alert('添加部门功能');
        }

        // 点击模态框背景关闭
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });
// 用户数据存储（模拟数据）
        const userData = {
            1: {
                id: 1,
                name: '张三',
                email: 'zhangsan@company.com',
                employeeId: 'EMP001',
                department: '技术部',
                role: '系统管理员',
                status: '正常',
                phone: '13800138001',
                remark: '系统管理员，负责整体系统维护'
            },
            2: {
                id: 2,
                name: '李四',
                email: 'lisi@company.com',
                employeeId: 'EMP002',
                department: '产品部',
                role: '数据分析师',
                status: '正常',
                phone: '13800138002',
                remark: '产品数据分析专家'
            },
            3: {
                id: 3,
                name: '王五',
                email: 'wangwu@company.com',
                employeeId: 'EMP003',
                department: '运营部',
                role: '普通用户',
                status: '待激活',
                phone: '13800138003',
                remark: '新入职员工'
            }
        };

        // 侧边栏切换
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            
            if (sidebar.classList.contains('sidebar-expanded')) {
                sidebar.classList.remove('sidebar-expanded');
                sidebar.classList.add('sidebar-collapsed');
                mainContent.classList.remove('ml-60');
                mainContent.classList.add('ml-16');
            } else {
                sidebar.classList.remove('sidebar-collapsed');
                sidebar.classList.add('sidebar-expanded');
                mainContent.classList.remove('ml-16');
                mainContent.classList.add('ml-60');
            }
        }

        // 面板切换
        function switchPanel(panelName) {
            // 隐藏所有面板
            const panels = document.querySelectorAll('.content-panel');
            panels.forEach(panel => panel.classList.remove('active'));
            
            // 显示目标面板
            document.getElementById(panelName + '-panel').classList.add('active');
            
            // 更新导航状态
            const navButtons = document.querySelectorAll('[data-panel]');
            navButtons.forEach(button => {
                if (button.dataset.panel === panelName) {
                    button.classList.add('border-primary', 'text-primary');
                    button.classList.remove('border-transparent', 'text-gray-500');
                } else {
                    button.classList.remove('border-primary', 'text-primary');
                    button.classList.add('border-transparent', 'text-gray-500');
                }
            });
        }

        // 部门树点击事件
        document.addEventListener('DOMContentLoaded', function() {
            const deptItems = document.querySelectorAll('.dept-item');
            deptItems.forEach(item => {
                item.addEventListener('click', function() {
                    // 移除其他选中状态
                    deptItems.forEach(i => i.classList.remove('selected'));
                    // 添加当前选中状态
                    this.classList.add('selected');
                });
            });
        });

        // 添加用户模态框
        function showAddUserModal() {
            document.getElementById('addUserModal').classList.add('show');
        }

        function hideAddUserModal() {
            document.getElementById('addUserModal').classList.remove('show');
        }

        // 编辑用户功能
        function editUser(userId) {
            const user = userData[userId];
            if (!user) {
                alert('用户不存在');
                return;
            }

            // 填充表单数据
            document.getElementById('editUserId').value = user.id;
            document.getElementById('editUserName').value = user.name;
            document.getElementById('editUserEmail').value = user.email;
            document.getElementById('editUserEmployeeId').value = user.employeeId;
            document.getElementById('editUserDepartment').value = user.department;
            document.getElementById('editUserRole').value = user.role;
            document.getElementById('editUserStatus').value = user.status;
            document.getElementById('editUserPhone').value = user.phone || '';
            document.getElementById('editUserRemark').value = user.remark || '';

            // 显示模态框
            document.getElementById('editUserModal').classList.add('show');
        }

        function hideEditUserModal() {
            document.getElementById('editUserModal').classList.remove('show');
        }

        function saveUserEdit() {
            const userId = document.getElementById('editUserId').value;
            const name = document.getElementById('editUserName').value;
            const email = document.getElementById('editUserEmail').value;
            const employeeId = document.getElementById('editUserEmployeeId').value;
            const department = document.getElementById('editUserDepartment').value;
            const role = document.getElementById('editUserRole').value;
            const status = document.getElementById('editUserStatus').value;
            const phone = document.getElementById('editUserPhone').value;
            const remark = document.getElementById('editUserRemark').value;

            // 验证必填字段
            if (!name || !email || !employeeId || !department || !role) {
                alert('请填写所有必填字段');
                return;
            }

            // 更新用户数据
            userData[userId] = {
                ...userData[userId],
                name,
                email,
                employeeId,
                department,
                role,
                status,
                phone,
                remark
            };

            // 更新表格显示
            updateUserTableRow(userId);

            // 关闭模态框
            hideEditUserModal();

            // 显示成功消息
            showSuccessMessage('用户信息更新成功！');
        }

        // 更新表格行显示
        function updateUserTableRow(userId) {
            const user = userData[userId];
            // 这里应该更新对应的表格行，简化处理
            console.log('用户信息已更新:', user);
        }

        // 重置密码功能
        let currentResetUserId = null;

        function resetPassword(userId) {
            const user = userData[userId];
            if (!user) {
                alert('用户不存在');
                return;
            }

            currentResetUserId = userId;
            document.getElementById('resetUserName').textContent = user.name;
            document.getElementById('resetPasswordModal').classList.add('show');
        }

        function hideResetPasswordModal() {
            document.getElementById('resetPasswordModal').classList.remove('show');
            currentResetUserId = null;
            // 清空表单
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('sendEmailNotification').checked = false;
        }

        function confirmResetPassword() {
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const sendEmail = document.getElementById('sendEmailNotification').checked;

            // 如果设置了新密码，验证密码匹配
            if (newPassword && newPassword !== confirmPassword) {
                alert('两次输入的密码不一致');
                return;
            }

            // 执行重置密码逻辑
            const user = userData[currentResetUserId];
            console.log(`重置用户 ${user.name} 的密码`, {
                newPassword: newPassword || '默认密码',
                sendEmail
            });

            hideResetPasswordModal();
            showSuccessMessage(`已成功重置用户 ${user.name} 的密码！`);
        }

        // 禁用/启用用户
        function toggleUserStatus(userId) {
            const user = userData[userId];
            if (!user) return;

            const newStatus = user.status === '正常' ? '已禁用' : '正常';
            const action = newStatus === '已禁用' ? '禁用' : '启用';

            if (confirm(`确定要${action}用户 ${user.name} 吗？`)) {
                user.status = newStatus;
                updateUserTableRow(userId);
                showSuccessMessage(`已成功${action}用户 ${user.name}！`);
            }
        }

        // 激活用户
        function activateUser(userId) {
            const user = userData[userId];
            if (!user) return;

            if (confirm(`确定要激活用户 ${user.name} 吗？`)) {
                user.status = '正常';
                updateUserTableRow(userId);
                showSuccessMessage(`已成功激活用户 ${user.name}！`);
            }
        }

        // 删除用户
        function deleteUser(userId) {
            const user = userData[userId];
            if (!user) return;

            if (confirm(`确定要删除用户 ${user.name} 吗？此操作不可恢复！`)) {
                delete userData[userId];
                // 从表格中移除行
                console.log(`用户 ${user.name} 已被删除`);
                showSuccessMessage(`已成功删除用户 ${user.name}！`);
            }
        }

        // 显示成功消息
        function showSuccessMessage(message) {
            // 创建临时提示元素
            const toast = document.createElement('div');
            toast.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
            toast.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-check-circle mr-2"></i>
                    <span>${message}</span>
                </div>
            `;
            
            document.body.appendChild(toast);
            
            // 3秒后自动移除
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }

        // 编辑角色
        function editRole(roleId) {
            alert('编辑角色: ' + roleId);
        }

        // 添加部门模态框
        function showAddDeptModal() {
            alert('添加部门功能');
        }

        // 点击模态框背景关闭
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('show');
            }
        });

        // 更新用户表格中的操作按钮，使其调用正确的函数
        document.addEventListener('DOMContentLoaded', function() {
            // 为现有的操作按钮添加事件监听器
            const resetPasswordButtons = document.querySelectorAll('[onclick*="重置密码"]');
            resetPasswordButtons.forEach((button, index) => {
                const userId = index + 1; // 简化处理，实际应该从数据属性获取
                button.setAttribute('onclick', `resetPassword(${userId})`);
            });

            const toggleStatusButtons = document.querySelectorAll('[onclick*="禁用"], [onclick*="激活"]');
            toggleStatusButtons.forEach((button, index) => {
                const userId = index + 1;
                if (button.textContent.includes('禁用')) {
                    button.setAttribute('onclick', `toggleUserStatus(${userId})`);
                } else if (button.textContent.includes('激活')) {
                    button.setAttribute('onclick', `activateUser(${userId})`);
                } else if (button.textContent.includes('删除')) {
                    button.setAttribute('onclick', `deleteUser(${userId})`);
                }
            });
        });
    </script>
</body>
</html>
